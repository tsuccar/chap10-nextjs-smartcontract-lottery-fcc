(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{27750:function(e,t,r){"use strict";r.r(t),r.d(t,{PhantomAdapter:function(){return ge}});var n=r(4942),i=r(95844),o=r(13631),a=r(20917),s=r(96245),c=r(2043),h=r.n(c);const l="eip155",d="solana",p="other",u="solana",g=(e,t)=>{if(e===p)return null;const r=t?"number"===typeof t?t:parseInt(t,16):(e=>{if(e===l)return 1;if(e===d)return 1;throw new Error(`Chain namespace ${e} is not supported`)})(e);return e===l?(e=>1===e?{chainNamespace:l,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===e?{chainNamespace:l,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===e?{chainNamespace:l,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===e?{chainNamespace:l,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===e?{chainNamespace:l,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===e?{chainNamespace:l,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon"}:56===e?{chainNamespace:l,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:97===e?{chainNamespace:l,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:25===e?{chainNamespace:l,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{chainNamespace:l,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:8217===e?{chainNamespace:l,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn"}:null)(r):e===d?(e=>1===e?{chainNamespace:d,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}:2===e?{chainNamespace:d,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana"}:3===e?{chainNamespace:d,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana"}:null)(r):null};class m extends o.s{constructor(e,t){super(t),(0,n.Z)(this,"code",void 0),(0,n.Z)(this,"message",void 0),this.code=e,this.message=t||"",Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class f extends m{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new f(e,`${f.messages[e]}, ${t}`)}static notFound(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5001,e)}static notInstalled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5002,e)}static notReady(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5003,e)}static windowBlocked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5004,e)}static windowClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5005,e)}static incompatibleChainNameSpace(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5006,e)}static duplicateAdapterError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5007,e)}static invalidProviderConfigError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5008,e)}static providerNotReadyError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5009,e)}static rpcConnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5010,e)}static invalidParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5011,e)}static invalidNetwork(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5013,e)}}(0,n.Z)(f,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class v extends m{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new v(e,`${v.messages[e]}${t}`)}static connectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5111,e)}static disconnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5112,e)}static notConnectedError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5113,e)}static popupClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5114,e)}}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(0,n.Z)(v,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});const E={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},P=y({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLLET:"sollet",SOLLET_EXTENSION:"sollet-extension",SOLFLARE:"solflare",SLOPE:"slope"},E),C=y({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},E),O=y(y({},C),P);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const T="external",k={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},A=N(N({},k),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"});class _ extends i.Ue{constructor(){super(...arguments),(0,n.Z)(this,"adapterData",{}),(0,n.Z)(this,"sessionTime",86400),(0,n.Z)(this,"chainConfig",null)}get chainConfigProxy(){return this.chainConfig?N({},this.chainConfig):null}setChainConfig(e){if(this.status===k.READY)return;if(!e.chainNamespace)throw f.notReady("ChainNamespace is required while setting chainConfig");const t=g(e.chainNamespace,e.chainId);this.chainConfig=N(N({},t),e)}setAdapterSettings(e){}checkConnectionRequirements(){if(this.name!==O.WALLET_CONNECT_V1||this.status!==k.CONNECTING){if(this.status===k.CONNECTING)throw f.notReady("Already connecting");if(this.status===k.CONNECTED)throw v.connectionError("Already connected");if(this.status!==k.READY)throw v.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function");if(!this.clientId)throw v.connectionError("Please initialize Web3Auth with a valid clientId in constructor")}}checkInitializationRequirements(){if(this.status!==k.NOT_READY){if(this.status===k.CONNECTED)throw f.notReady("Already connected");if(this.status===k.READY)throw f.notReady("Adapter is already initialized")}}updateAdapterData(e){this.adapterData=e,this.emit(A.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}const I="https://authjs.web3auth.io";var x=h().getLogger("web3auth-logger");function S(e){let t,r=!1,n=0;try{t=window[e],r=!0,n=t.length;const i="__storage_test__";return t.setItem(i,i),t.removeItem(i),!0}catch(i){const e=i;return!(!e||22!==e.code&&1014!==e.code&&"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||!r||0===n)}}var D=r(9193),j=r.n(D);class M extends _{constructor(e){super(),(0,n.Z)(this,"clientId",void 0),this.clientId=e.clientId}async authenticateUser(){var e;if(!this.provider||null===(e=this.chainConfig)||void 0===e||!e.chainId)throw v.notConnectedError();const{chainNamespace:t,chainId:r}=this.chainConfig;if(this.status!==k.CONNECTED)throw v.notConnectedError("Not connected with wallet, Please login/connect first");const n=await this.provider.request({method:"getAccounts"});if(n&&n.length>0){const e=(i=n[0],o=this.name,S("localStorage")?localStorage.getItem(`${i.toLowerCase()}_${o}`):null);if(e){if(!(e=>{const t=(0,s.Z)(e);return!t.exp||t.exp<Math.floor(Date.now()/1e3)})(e))return{idToken:e}}const c={domain:window.location.origin,uri:window.location.href,address:n[0],chainId:parseInt(r,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:(new Date).toISOString()},h=await(async(e,t)=>{const r={payload:e,header:{t:"solana"===t?"sip99":"eip191"},network:"solana"===t?"solana":"ethereum"},n=await(0,a.v_)(`${I}/siww/get`,r);if(!n.success)throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");return n.challenge})(c,t),l=(new TextEncoder).encode(h),d=await this.provider.request({method:"signMessage",params:{message:l,display:"utf8"}}),p=await(async(e,t,r,n,i,o)=>{const s={signature:{s:t,t:"solana"===e?"sip99":"eip191"},message:r,issuer:n,audience:window.location.hostname,timeout:i},c=await(0,a.v_)(`${I}/siww/verify`,s,{headers:{client_id:o,wallet_provider:n}});if(!c.success)throw x.error("Failed to authenticate user, ,message verification failed",c.error),new Error("Failed to authenticate user, ,message verification failed");return c.token})(t,j().encode(d),h,this.name,this.sessionTime,this.clientId);return((e,t,r)=>{S("localStorage")&&localStorage.setItem(`${e.toLowerCase()}_${t}`,r)})(n[0],this.name,p),{idToken:p}}var i,o;throw v.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnect(){if(this.status!==k.CONNECTED)throw v.disconnectionError("Not connected with wallet");const e=await this.provider.request({method:"getAccounts"});var t,r;e&&e.length>0&&(t=e[0],r=this.name,S("localStorage")&&localStorage.removeItem(`${t.toLowerCase()}_${r}`))}}var R=r(22782),K=r(79826),Z=r(23420),q=r.n(Z);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class W extends R.xG{constructor(e){let{config:t,state:r}=e;if(super({config:t,state:r}),(0,n.Z)(this,"_providerEngineProxy",null),!t.chainConfig)throw f.invalidProviderConfigError("Please provide chainConfig");if(!t.chainConfig.chainId)throw f.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!t.chainConfig.rpcTarget)throw f.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");this.defaultState={chainId:"loading"},this.defaultConfig={chainConfig:t.chainConfig,networks:{[t.chainConfig.chainId]:t.chainConfig}},super.initialize()}get provider(){return this._providerEngineProxy}set provider(e){throw new Error("Method not implemented.")}addChain(e){if(!e.chainId)throw K.ethErrors.rpc.invalidParams("chainId is required");if(!e.rpcTarget)throw K.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:L(L({},this.config.networks),{},{[e.chainId]:e})})}getChainConfig(e){var t;const r=null===(t=this.config.networks)||void 0===t?void 0:t[e];if(!r)throw K.ethErrors.rpc.invalidRequest(`Chain ${e} is not supported, please add chainConfig for it`);return r}getProviderEngineProxy(){return this._providerEngineProxy}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,R.qY)(e)}}class Y{constructor(){(0,n.Z)(this,"_providerEngineProxy",null)}get provider(){return this._providerEngineProxy}set provider(e){throw new Error("Method not implemented.")}addChain(e){throw new Error("Method not implemented.")}async setupProvider(e){const t=this.getPrivKeyMiddleware(e),r=new i.eI;r.push(t);const n=(0,R.Xj)(r);this.updateProviderEngineProxy(n)}async switchChain(e){return Promise.resolve()}getProviderEngineProxy(){return this._providerEngineProxy}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,R.qY)(e)}getPrivKeyMiddleware(e){const t={getPrivatekey:async()=>e};return this.createPrivKeyMiddleware(t)}createPrivKeyMiddleware(e){let{getPrivatekey:t}=e;return(0,i.v0)({private_key:(0,i.Pk)((async function(e,r){r.result=await t()}))})}}(0,n.Z)(Y,"getProviderInstance",(async e=>{const t=new Y;return await t.setupProvider(e.privKey),t}));q()();var B=r(77191),$=r.n(B),z=r(73059),H=r(50108),F=r.n(H),G=r(48764).Buffer;function V(e){return(t,r,n,i)=>"solana_chainId"===t.method?(r.result=e,i()):n()}function X(e){return(t,r,n,i)=>"solana_provider_config"===t.method?(r.result=e,i()):n()}function J(e){const{chainId:t}=e;return(0,i.UZ)([V(t),X(e)])}function Q(e){let{getAccounts:t}=e;return(0,i.Pk)((async(e,r,n)=>{const{method:i}=e;if("getAccounts"!==i)return n();if(!t)throw new Error("WalletMiddleware - opts.getAccounts not provided");const o=await t(e);r.result=o}))}function ee(e){let{requestAccounts:t}=e;return(0,i.Pk)((async(e,r,n)=>{const{method:i}=e;if("requestAccounts"!==i)return n();if(!t)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const o=await t(e);r.result=o}))}function te(e,t){return(0,i.Pk)((async(r,n,i)=>{const{method:o}=r;if(o!==e)return i();if(!t)throw new Error(`WalletMiddleware - ${e} not provided`);const a=await t(r);n.result=a}))}function re(e){const{getAccounts:t,requestAccounts:r,signTransaction:n,signAndSendTransaction:o,signAllTransactions:a,signMessage:s,getPrivateKey:c,getSecretKey:h}=e;return(0,i.UZ)([ee({requestAccounts:r}),Q({getAccounts:t}),te("signTransaction",n),te("signAndSendTransaction",o),te("signAllTransactions",a),te("signMessage",s),te("solanaPrivateKey",c),te("solanaSecretKey",h)])}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class oe extends W{constructor(e){let{config:t,state:r}=e;super({config:{chainConfig:ie(ie({},t.chainConfig),{},{chainNamespace:d})},state:r})}async switchChain(e){return Promise.resolve()}async setupProvider(e){const t=new i.eI,r=re(this.getProviderHandlers(e));t.push(r);const n=J(this.config.chainConfig);t.push(n);const o=this.getInjectedProviderProxy(e);o&&t.push(o);const a=(0,R.Xj)(t);this.updateProviderEngineProxy(a),await this.lookupNetwork()}async lookupNetwork(){const{chainConfig:e}=this.config;return this.update({chainId:e.chainId}),e.chainId||""}getInjectedProviderProxy(e){}}const ae=e=>({requestAccounts:async()=>e.publicKey?[$().encode(e.publicKey.toBytes())]:[],getAccounts:async()=>e.publicKey?[$().encode(e.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw K.ethErrors.rpc.methodNotSupported()},getSecretKey:async()=>{throw K.ethErrors.rpc.methodNotSupported()},signTransaction:async t=>await e.signTransaction(t.params.message),signMessage:async t=>(await e.signMessage(t.params.message,t.params.display)).signature,signAllTransactions:async t=>{var r,n;if(null===(r=t.params)||void 0===r||!r.message||null===(n=t.params)||void 0===n||!n.message.length)throw K.ethErrors.rpc.invalidParams("message");return await e.signAllTransactions(t.params.message)},signAndSendTransaction:async t=>({signature:(await e.signAndSendTransaction(t.params.message)).signature})});function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){return(0,i.Pk)((async(t,r,i)=>{const o=await e.request(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t));r.result=o}))}class he extends oe{getProviderHandlers(e){return ae(e)}getInjectedProviderProxy(e){return ce(e)}}function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class pe extends W{constructor(e){let{config:t,state:r}=e;super({config:{chainConfig:de(de({},t.chainConfig),{},{chainNamespace:d})},state:r})}async enable(){if(!this.state.privateKey)throw K.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(e){const t=await async function(e){let{privKey:t,getProviderEngineProxy:r}=e;if("string"!==typeof t)throw f.invalidParams("privKey must be a string");const n=z.RG.fromSecretKey(G.from(t,"hex"));return{requestAccounts:async()=>[n.publicKey.toBase58()],getAccounts:async()=>[n.publicKey.toBase58()],getPrivateKey:async()=>t,getSecretKey:async()=>$().encode(n.secretKey),signTransaction:async e=>{var t;if(null===(t=e.params)||void 0===t||!t.message)throw K.ethErrors.rpc.invalidParams("message");const r=e.params.message;return r.partialSign(n),r},signMessage:async e=>{var t;if(null===(t=e.params)||void 0===t||!t.message)throw K.ethErrors.rpc.invalidParams("message");return F().sign.detached(e.params.message,n.secretKey)},signAndSendTransaction:async e=>{var t;if(null===(t=e.params)||void 0===t||!t.message)throw K.ethErrors.rpc.invalidParams("message");const i=r();if(!i)throw K.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const o=e.params.message;return o.sign(n),{signature:await i.request({method:"sendTransaction",params:[$().encode(o.serialize())]})}},signAllTransactions:async e=>{var t,r,i;if(null===(t=e.params)||void 0===t||!t.message||null===(r=e.params)||void 0===r||!r.message.length)throw K.ethErrors.rpc.invalidParams("message");const o=null===(i=e.params)||void 0===i?void 0:i.message;for(const a of o||[])a.partialSign(n);return o}}}({privKey:e,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),r=re(t),n=new i.eI,{networkMiddleware:o}=function(e){const{rpcTarget:t}=e,r=(0,R.v$)({rpcTarget:t});return{networkMiddleware:(0,i.UZ)([J(e),r]),fetchMiddleware:r}}(this.config.chainConfig);n.push(this.getChainSwitchMiddleware()),n.push(this.getAccountMiddleware()),n.push(r),n.push(o);const a=(0,R.Xj)(n);this.updateProviderEngineProxy(a),await this.lookupNetwork()}async updateAccount(e){if(!this._providerEngineProxy)throw K.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});await this._providerEngineProxy.request({method:"solanaPrivateKey"})!==e.privateKey&&(await this.setupProvider(e.privateKey),this._providerEngineProxy.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"requestAccounts"})}))}async switchChain(e){if(!this._providerEngineProxy)throw K.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const t=this.getChainConfig(e.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:t});const r=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(r)}async lookupNetwork(){if(!this._providerEngineProxy)throw K.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const e=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig:t}=this.config;if("ok"!==e)throw f.rpcConnectionError(`Failed to lookup network for following rpc target: ${t.rpcTarget}`);return this.update({chainId:t.chainId}),this.state.chainId!==t.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){return function(e){let{addNewChainConfig:t,switchSolanaChain:r}=e;return(0,i.UZ)([te("addSolanaChain",t),te("switchSolanaChain",r)])}({addNewChainConfig:async e=>{if(!e.params)throw K.ethErrors.rpc.invalidParams("Missing request params");const{chainId:t,chainName:r,rpcUrls:n,blockExplorerUrls:i,nativeCurrency:o}=e.params;if(!t)throw K.ethErrors.rpc.invalidParams("Missing chainId in chainParams");if(!n||0===n.length)throw K.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");if(!o)throw K.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");this.addChain({chainNamespace:d,chainId:t,ticker:(null===o||void 0===o?void 0:o.symbol)||"SOL",tickerName:(null===o||void 0===o?void 0:o.name)||"Solana",displayName:r,rpcTarget:n[0],blockExplorer:(null===i||void 0===i?void 0:i[0])||""})},switchSolanaChain:async e=>{if(!e.params)throw K.ethErrors.rpc.invalidParams("Missing request params");if(!e.params.chainId)throw K.ethErrors.rpc.invalidParams("Missing chainId");await this.switchChain(e.params)}})}getAccountMiddleware(){return function(e){let{updatePrivatekey:t}=e;return(0,i.UZ)([te("updateAccount",t)])}({updatePrivatekey:async e=>{if(!e.params)throw K.ethErrors.rpc.invalidParams("Missing request params");if(!e.params.privateKey)throw K.ethErrors.rpc.invalidParams("Missing privateKey");const{privateKey:t}=e.params;await this.updateAccount({privateKey:t})}})}}(0,n.Z)(pe,"getProviderInstance",(async e=>{const t=new pe({config:{chainConfig:e.chainConfig}});return await t.setupProvider(e.privKey),t}));function ue(e,t,r){return new Promise(((n,i)=>{r>0?setTimeout((async()=>{const o=await e();o&&n(o),o||ue(e,t,r-1).then((e=>(n(e),e))).catch((e=>i(e)))}),t):n(!1)}))}class ge extends M{constructor(e){super(e),(0,n.Z)(this,"name",O.PHANTOM),(0,n.Z)(this,"adapterNamespace",u),(0,n.Z)(this,"currentChainNamespace",d),(0,n.Z)(this,"type",T),(0,n.Z)(this,"status",k.NOT_READY),(0,n.Z)(this,"_wallet",null),(0,n.Z)(this,"phantomProvider",null),(0,n.Z)(this,"rehydrated",!1),(0,n.Z)(this,"_onDisconnect",(()=>{this._wallet&&(this._wallet.off("disconnect",this._onDisconnect),this.rehydrated=!1,this.status=this.status===k.CONNECTED?k.READY:k.NOT_READY,this.emit(A.DISCONNECTED))})),this.chainConfig=(null===e||void 0===e?void 0:e.chainConfig)||null,this.sessionTime=(null===e||void 0===e?void 0:e.sessionTime)||86400}get isWalletConnected(){var e;return!(null===(e=this._wallet)||void 0===e||!e.isConnected||this.status!==k.CONNECTED)}get provider(){var e;return(null===(e=this.phantomProvider)||void 0===e?void 0:e.provider)||null}set provider(e){throw new Error("Not implemented")}setAdapterSettings(e){this.status!==k.READY&&(null!==e&&void 0!==e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!==e&&void 0!==e&&e.clientId&&(this.clientId=e.clientId))}async init(e){if(super.checkInitializationRequirements(),this.chainConfig||(this.chainConfig=g(d,"0x1")),this._wallet=await async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interval:1e3,count:3};if("undefined"!==typeof window&&null!==(e=window.solana)&&void 0!==e&&e.isPhantom)return window.solana;return await ue((()=>{var e;return null===(e=window.solana)||void 0===e?void 0:e.isPhantom}),t.interval,t.count)?window.solana:null}({interval:500,count:3}),!this._wallet)throw f.notInstalled();this.phantomProvider=new he({config:{chainConfig:this.chainConfig}}),this.status=k.READY,this.emit(A.READY,O.PHANTOM);try{x.debug("initializing phantom adapter"),e.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(t){x.error("Failed to connect with cached phantom provider",t),this.emit("ERRORED",t)}}async connect(){var e=this;try{if(super.checkConnectionRequirements(),this.status=k.CONNECTING,this.emit(A.CONNECTING,{adapter:O.PHANTOM}),!this._wallet)throw f.notInstalled();if(this._wallet.isConnected)await this.connectWithProvider(this._wallet);else{const r=this._wallet._handleDisconnect;try{await new Promise(((t,n)=>{if(!this._wallet)return n(f.notInstalled());this._wallet.once("connect",(async()=>{await this.connectWithProvider(this._wallet),t(this.provider)})),this._wallet._handleDisconnect=function(){n(f.windowClosed());for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r.apply(e._wallet,i)},this._wallet.connect().catch((e=>{n(e)}))}))}catch(t){if(t instanceof m)throw t;throw v.connectionError(null===t||void 0===t?void 0:t.message)}finally{this._wallet._handleDisconnect=r}}if(!this._wallet.publicKey)throw v.connectionError();return this._wallet.on("disconnect",this._onDisconnect),this.provider}catch(t){throw this.status=k.READY,this.rehydrated=!1,this.emit(A.ERRORED,t),t}}async disconnect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};await super.disconnect();try{var t;await(null===(t=this._wallet)||void 0===t?void 0:t.disconnect()),e.cleanup&&(this.status=k.NOT_READY,this.phantomProvider=null,this._wallet=null),this.emit(A.DISCONNECTED)}catch(r){this.emit(A.ERRORED,v.disconnectionError(null===r||void 0===r?void 0:r.message))}}async getUserInfo(){if(!this.isWalletConnected)throw v.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async connectWithProvider(e){if(!this.phantomProvider)throw v.connectionError("No phantom provider");return await this.phantomProvider.setupProvider(e),this.status=k.CONNECTED,this.emit(A.CONNECTED,{adapter:O.PHANTOM,reconnected:this.rehydrated}),this.provider}}},9193:function(e,t,r){const n=r(74341);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},74341:function(e){"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=n}var a=e.length,s=e.charAt(0),c=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,i=0;e[r]===s;)n++,r++;for(var o=(e.length-r)*c+1>>>0,h=new Uint8Array(o);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var d=0,p=o-1;(0!==l||d<i)&&-1!==p;p--,d++)l+=a*h[p]>>>0,h[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,r++}for(var u=o-i;u!==o&&0===h[u];)u++;for(var g=new Uint8Array(n+(o-u)),m=n;u!==o;)g[m++]=h[u++];return g}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var c=(o-i)*h+1>>>0,l=new Uint8Array(c);i!==o;){for(var d=t[i],p=0,u=c-1;(0!==d||p<n)&&-1!==u;u--,p++)d+=256*l[u]>>>0,l[u]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");n=p,i++}for(var g=c-n;g!==c&&0===l[g];)g++;for(var m=s.repeat(r);g<c;++g)m+=e.charAt(l[g]);return m},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}}}]);