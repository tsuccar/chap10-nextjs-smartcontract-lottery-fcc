"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[600],{96600:function(e,t,r){r.r(t),r.d(t,{WalletConnectV1Adapter:function(){return qe}});var n=r(4942),i=r(71516),o=r(95844),a=r(13631),s=r(20917),c=r(96245),d=r(2043),u=r.n(d);const f="eip155",h="solana",p="other",l="eip155",g=(e,t)=>{if(e===p)return null;const r=t?"number"===typeof t?t:parseInt(t,16):(e=>{if(e===f)return 1;if(e===h)return 1;throw new Error(`Chain namespace ${e} is not supported`)})(e);return e===f?(e=>1===e?{chainNamespace:f,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===e?{chainNamespace:f,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===e?{chainNamespace:f,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===e?{chainNamespace:f,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===e?{chainNamespace:f,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===e?{chainNamespace:f,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon"}:56===e?{chainNamespace:f,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:97===e?{chainNamespace:f,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:25===e?{chainNamespace:f,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{chainNamespace:f,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:8217===e?{chainNamespace:f,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn"}:null)(r):e===h?(e=>1===e?{chainNamespace:h,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}:2===e?{chainNamespace:h,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana"}:3===e?{chainNamespace:h,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana"}:null)(r):null};class m extends a.s{constructor(e,t){super(t),(0,n.Z)(this,"code",void 0),(0,n.Z)(this,"message",void 0),this.code=e,this.message=t||"",Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class y extends m{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new y(e,`${y.messages[e]}, ${t}`)}static notFound(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5001,e)}static notInstalled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5002,e)}static notReady(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5003,e)}static windowBlocked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5004,e)}static windowClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5005,e)}static incompatibleChainNameSpace(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5006,e)}static duplicateAdapterError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5007,e)}static invalidProviderConfigError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5008,e)}static providerNotReadyError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5009,e)}static rpcConnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5010,e)}static invalidParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5011,e)}static invalidNetwork(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5013,e)}}(0,n.Z)(y,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class v extends m{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new v(e,`${v.messages[e]}${t}`)}static connectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5111,e)}static disconnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5112,e)}static notConnectedError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5113,e)}static popupClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5114,e)}}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(0,n.Z)(v,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});const b={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},E=P({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLLET:"sollet",SOLLET_EXTENSION:"sollet-extension",SOLFLARE:"solflare",SLOPE:"slope"},b),x=P({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},b),C=P(P({},x),E);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const _="external",T={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},k=N(N({},T),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"});class S extends o.Ue{constructor(){super(...arguments),(0,n.Z)(this,"adapterData",{}),(0,n.Z)(this,"sessionTime",86400),(0,n.Z)(this,"chainConfig",null)}get chainConfigProxy(){return this.chainConfig?N({},this.chainConfig):null}setChainConfig(e){if(this.status===T.READY)return;if(!e.chainNamespace)throw y.notReady("ChainNamespace is required while setting chainConfig");const t=g(e.chainNamespace,e.chainId);this.chainConfig=N(N({},t),e)}setAdapterSettings(e){}checkConnectionRequirements(){if(this.name!==C.WALLET_CONNECT_V1||this.status!==T.CONNECTING){if(this.status===T.CONNECTING)throw y.notReady("Already connecting");if(this.status===T.CONNECTED)throw v.connectionError("Already connected");if(this.status!==T.READY)throw v.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function");if(!this.clientId)throw v.connectionError("Please initialize Web3Auth with a valid clientId in constructor")}}checkInitializationRequirements(){if(this.status!==T.NOT_READY){if(this.status===T.CONNECTED)throw y.notReady("Already connected");if(this.status===T.READY)throw y.notReady("Adapter is already initialized")}}updateAdapterData(e){this.adapterData=e,this.emit(k.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}const I="https://authjs.web3auth.io";var A=u().getLogger("web3auth-logger");function B(e){let t,r=!1,n=0;try{t=window[e],r=!0,n=t.length;const i="__storage_test__";return t.setItem(i,i),t.removeItem(i),!0}catch(i){const e=i;return!(!e||22!==e.code&&1014!==e.code&&"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||!r||0===n)}}const j=e=>("string"===typeof e||"number"===typeof e)&&/^(-)?0x[0-9a-f]*$/i.test(e);class D extends S{constructor(e){super(),(0,n.Z)(this,"clientId",void 0),this.clientId=e.clientId}async authenticateUser(){var e;if(!this.provider||null===(e=this.chainConfig)||void 0===e||!e.chainId)throw v.notConnectedError();const{chainNamespace:t,chainId:r}=this.chainConfig;if(this.status!==T.CONNECTED)throw v.notConnectedError("Not connected with wallet, Please login/connect first");const n=await this.provider.request({method:"eth_accounts"});if(n&&n.length>0){const e=(i=n[0],o=this.name,B("localStorage")?localStorage.getItem(`${i.toLowerCase()}_${o}`):null);if(e){if(!(e=>{const t=(0,c.Z)(e);return!t.exp||t.exp<Math.floor(Date.now()/1e3)})(e))return{idToken:e}}const a={domain:window.location.origin,uri:window.location.href,address:n[0],chainId:parseInt(r,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:(new Date).toISOString()},d=await(async(e,t)=>{const r={payload:e,header:{t:"solana"===t?"sip99":"eip191"},network:"solana"===t?"solana":"ethereum"},n=await(0,s.v_)(`${I}/siww/get`,r);if(!n.success)throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");return n.challenge})(a,t),u=await this.provider.request({method:"personal_sign",params:[d,n[0]]}),f=await(async(e,t,r,n,i,o)=>{const a={signature:{s:t,t:"solana"===e?"sip99":"eip191"},message:r,issuer:n,audience:window.location.hostname,timeout:i},c=await(0,s.v_)(`${I}/siww/verify`,a,{headers:{client_id:o,wallet_provider:n}});if(!c.success)throw A.error("Failed to authenticate user, ,message verification failed",c.error),new Error("Failed to authenticate user, ,message verification failed");return c.token})(t,u,d,this.name,this.sessionTime,this.clientId);return((e,t,r)=>{B("localStorage")&&localStorage.setItem(`${e.toLowerCase()}_${t}`,r)})(n[0],this.name,f),{idToken:f}}var i,o;throw v.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnect(){if(this.status!==T.CONNECTED)throw v.disconnectionError("Not connected with wallet");const e=await this.provider.request({method:"eth_accounts"});var t,r;e&&e.length>0&&(t=e[0],r=this.name,B("localStorage")&&localStorage.removeItem(`${t.toLowerCase()}_${r}`))}}var M=r(22782),R=r(79826),L=r(23420),F=r.n(L);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class K extends M.xG{constructor(e){let{config:t,state:r}=e;if(super({config:t,state:r}),(0,n.Z)(this,"_providerEngineProxy",null),!t.chainConfig)throw y.invalidProviderConfigError("Please provide chainConfig");if(!t.chainConfig.chainId)throw y.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!t.chainConfig.rpcTarget)throw y.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");this.defaultState={chainId:"loading"},this.defaultConfig={chainConfig:t.chainConfig,networks:{[t.chainConfig.chainId]:t.chainConfig}},super.initialize()}get provider(){return this._providerEngineProxy}set provider(e){throw new Error("Method not implemented.")}addChain(e){if(!e.chainId)throw R.ethErrors.rpc.invalidParams("chainId is required");if(!e.rpcTarget)throw R.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:H(H({},this.config.networks),{},{[e.chainId]:e})})}getChainConfig(e){var t;const r=null===(t=this.config.networks)||void 0===t?void 0:t[e];if(!r)throw R.ethErrors.rpc.invalidRequest(`Chain ${e} is not supported, please add chainConfig for it`);return r}getProviderEngineProxy(){return this._providerEngineProxy}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,M.qY)(e)}}class U{constructor(){(0,n.Z)(this,"_providerEngineProxy",null)}get provider(){return this._providerEngineProxy}set provider(e){throw new Error("Method not implemented.")}addChain(e){throw new Error("Method not implemented.")}async setupProvider(e){const t=this.getPrivKeyMiddleware(e),r=new o.eI;r.push(t);const n=(0,M.Xj)(r);this.updateProviderEngineProxy(n)}async switchChain(e){return Promise.resolve()}getProviderEngineProxy(){return this._providerEngineProxy}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,M.qY)(e)}getPrivKeyMiddleware(e){const t={getPrivatekey:async()=>e};return this.createPrivKeyMiddleware(t)}createPrivKeyMiddleware(e){let{getPrivatekey:t}=e;return(0,o.v0)({private_key:(0,o.Pk)((async function(e,r){r.result=await t()}))})}}(0,n.Z)(U,"getProviderInstance",(async e=>{const t=new U;return await t.setupProvider(e.privKey),t}));F()();var Z=r(66052),V=r(51091),q=r(62671),W=r(69282),z=r.n(W),$=r(40660),Y=r(70794),J=r(2832),X=r.n(J),Q=r(48764).Buffer;function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e){return 42===e.length}function ne(e){let{getAccounts:t,getPrivateKey:r,processDecryptMessage:n,processEncryptionPublicKey:i,processEthSignMessage:a,processPersonalMessage:s,processTransaction:c,processSignTransaction:d,processTypedMessage:u,processTypedMessageV3:f,processTypedMessageV4:h}=e;if(!t)throw new Error("opts.getAccounts is required");async function p(e,r){if("string"===typeof e&&e.length>0){const n=(await t(r)).map((e=>e.toLowerCase())),i=e.toLowerCase();if(n.includes(i))return i}throw R.ethErrors.rpc.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}return(0,o.v0)({eth_accounts:(0,o.Pk)((async function(e,r){r.result=await t(e)})),eth_private_key:(0,o.Pk)((async function(e,t){if(!r)throw R.ethErrors.rpc.methodNotSupported();t.result=r(e)})),eth_coinbase:(0,o.Pk)((async function(e,r){const n=await t(e);r.result=n[0]||null})),eth_sendTransaction:(0,o.Pk)((async function(e,t){if(!c)throw R.ethErrors.rpc.methodNotSupported();const r=e.params[0]||{from:""};r.from=await p(r.from,e),t.result=await c(r,e)})),eth_signTransaction:(0,o.Pk)((async function(e,t){if(!d)throw R.ethErrors.rpc.methodNotSupported();const r=e.params[0]||{from:""};r.from=await p(r.from,e),t.result=await d(r,e)})),eth_sign:(0,o.Pk)((async function(e,t){if(!a)throw R.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e),n=e.params[1],i=te(te({},e.params[2]||{}),{},{from:r,data:n});t.result=await a(i,e)})),eth_signTypedData:(0,o.Pk)((async function(e,t){if(!u)throw R.ethErrors.rpc.methodNotSupported();const r=e.params[0],n=await p(e.params[1],e),i=te(te({},e.params[2]||{}),{},{from:n,data:r});t.result=await u(i,e,"V1")})),eth_signTypedData_v3:(0,o.Pk)((async function(e,t){if(!f)throw R.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e),n={data:e.params[1],from:r,version:"V3"};t.result=await f(n,e,"V3")})),eth_signTypedData_v4:(0,o.Pk)((async function(e,t){if(!h)throw R.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e),n={data:e.params[1],from:r,version:"V4"};t.result=await h(n,e,"V4")})),personal_sign:(0,o.Pk)((async function(e,t){if(!s)throw R.ethErrors.rpc.methodNotSupported();const r=e.params[0],n=e.params[1],i=e.params[2]||{};let o,a;if(re(r)&&!re(n)){let e="The eth_personalSign method requires params ordered ";e+="[message, address]. This was previously handled incorrectly, ",e+="and has been corrected automatically. ",e+="Please switch this param order for smooth behavior in the future.",t.warning=e,o=r,a=n}else a=r,o=n;o=await p(o,e);const c=te(te({},i),{},{from:o,data:a});t.result=await s(c,e)})),eth_getEncryptionPublicKey:(0,o.Pk)((async function(e,t){if(!i)throw R.ethErrors.rpc.methodNotSupported();const r=await p(e.params[0],e);t.result=await i(r,e)})),eth_decrypt:(0,o.Pk)((async function(e,t){if(!n)throw R.ethErrors.rpc.methodNotSupported();const r=e.params[0],i=await p(e.params[1],e),o=te(te({},e.params[2]||{}),{},{from:i,data:r});t.result=n(o,e)}))})}function ie(e){const{getAccounts:t,getPrivateKey:r,processTransaction:n,processSignTransaction:i,processEthSignMessage:a,processTypedMessage:s,processTypedMessageV3:c,processTypedMessageV4:d,processPersonalMessage:u,processEncryptionPublicKey:f,processDecryptMessage:h}=e;return(0,o.UZ)([(0,o.v0)({eth_syncing:!1}),ne({getAccounts:t,getPrivateKey:r,processTransaction:n,processEthSignMessage:a,processSignTransaction:i,processTypedMessage:s,processTypedMessageV3:c,processTypedMessageV4:d,processPersonalMessage:u,processEncryptionPublicKey:f,processDecryptMessage:h})])}function oe(e){return(t,r,n,i)=>"eth_chainId"===t.method?(r.result=e,i()):n()}function ae(e){return(t,r,n,i)=>"eth_provider_config"===t.method?(r.result=e,i()):n()}function se(e){const{chainId:t,rpcTarget:r}=e,n=(0,M.v$)({rpcTarget:r});return{networkMiddleware:(0,o.UZ)([oe(t),ae(e),n]),fetchMiddleware:n}}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class ue extends K{constructor(e){let{config:t,state:r,connector:i}=e;super({config:{chainConfig:de(de({},t.chainConfig),{},{chainNamespace:f}),skipLookupNetwork:!!t.skipLookupNetwork},state:de(de({},r||{}),{},{chainId:"loading",accounts:[]})}),(0,n.Z)(this,"connector",null),this.connector=i||null}async enable(){if(!this.connector)throw R.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});return await this.setupProvider(this.connector),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(e){this.onConnectorStateUpdate(e),await this.setupEngine(e)}async switchChain(e){let{chainId:t,addChain:r=!0,lookup:n=!0}=e;if(!this.connector)throw R.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});const i=this.getChainConfig(t);this.update({chainId:"loading"});const{rpcTarget:o,displayName:a}=i;if(r)try{await this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:t,chainName:a,rpcUrls:[o]}]})}catch(s){A.error(s)}try{await this.connector.sendCustomRequest({method:"wallet_switchEthereumChain",params:[{chainId:t}]})}catch(s){if(A.error(s),"JSON RPC response format is invalid"!==s.message)throw s}this.configure({chainConfig:i}),n&&await this.lookupNetwork(this.connector)}async addChain(e){if(!this.connector)throw y.notReady("Wallet adapter is not ready yet");const{rpcTarget:t,displayName:r}=e;try{await this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:e.chainId,chainName:r,rpcUrls:[t]}]}),super.addChain(e)}catch(n){throw A.error(n),n}}async lookupNetwork(e){if(!e.connected)throw v.notConnectedError("Wallet connect connector is not connected");if(!this.provider)throw R.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const{chainId:t}=this.config.chainConfig,r=j(e.chainId.toString())?e.chainId:`0x${e.chainId.toString(16)}`;if(t!==r)throw y.rpcConnectionError(`Invalid network, net_version is: ${r}, expected: ${t}`);return this.provider.emit("connect",{chainId:t}),this.provider.emit("chainChanged",this.state.chainId),r}async setupEngine(e){const t=function(e){let{connector:t}=e;return{getPrivateKey:async()=>{throw R.ethErrors.rpc.methodNotSupported()},getAccounts:async e=>{const{accounts:r}=t;if(r&&r.length)return r;throw new Error("Failed to get accounts")},processTransaction:async(e,r)=>await t.sendTransaction(e),processSignTransaction:async(e,r)=>await t.signTransaction(e),processEthSignMessage:async(e,r)=>await t.signMessage([e.from,e.data]),processPersonalMessage:async(e,r)=>await t.signPersonalMessage([e.data,e.from]),processTypedMessage:async(e,r)=>await t.signTypedData([e.from,e.data]),processTypedMessageV3:async e=>await t.signTypedData([e.from,e.data]),processTypedMessageV4:async e=>await t.signTypedData([e.from,e.data]),processEncryptionPublicKey:async e=>{throw R.ethErrors.rpc.methodNotSupported()},processDecryptMessage:e=>{throw R.ethErrors.rpc.methodNotSupported()}}}({connector:e});this.update({accounts:e.accounts||[]});const r=ie(t),n=new o.eI,{networkMiddleware:i}=se(this.config.chainConfig);n.push(r),n.push(i);const a=(0,M.Xj)(n);this.updateProviderEngineProxy(a),this.config.skipLookupNetwork||await this.lookupNetwork(e)}async onConnectorStateUpdate(e){e.on("session_update",(async(t,r)=>{if(!this.provider)throw v.notConnectedError("Wallet connect connector is not connected");if(t)return void this.provider.emit("error",t);const{accounts:n,chainId:i,rpcUrl:o}=r.params[0];null!==n&&void 0!==n&&n.length&&this.state.accounts[0]!==n[0]&&(this.update({accounts:n}),this.provider.emit("accountsChanged",n));const a=`0x${i.toString(16)}`;if(i&&this.state.chainId!==a){const t=g(f,i)||{};this.configure({chainConfig:de(de({},t),{},{chainId:a,rpcTarget:o,chainNamespace:f})}),await this.setupEngine(e)}}))}}(0,n.Z)(ue,"getProviderInstance",(async e=>{const t=new ue({config:{chainConfig:e.chainConfig,skipLookupNetwork:e.skipLookupNetwork}});return await t.setupProvider(e.connector),t}));const fe=new Y.Z("1e18"),he=new Y.Z("1e9"),pe=new Y.Z("1"),le={hex:e=>"string"===typeof e?new Y.Z((0,q.stripHexPrefix)(e),16):new Y.Z(e,16),dec:e=>new Y.Z(e,10)},ge={WEI:e=>e.div(fe),GWEI:e=>e.div(he),ETH:e=>e.div(pe)},me={WEI:e=>e.times(fe).dp(0,Y.Z.ROUND_HALF_UP),GWEI:e=>e.times(he).dp(9,Y.Z.ROUND_HALF_UP),ETH:e=>e.times(pe).dp(9,Y.Z.ROUND_HALF_UP)},ye={hex:e=>e.toString(16),dec:e=>new Y.Z(e).toString(10)},ve=(e,t)=>{let{fromNumericBase:r="hex",toNumericBase:n,fromDenomination:i,toDenomination:o,numberOfDecimals:a}=t;return(e=>{const{value:t,fromNumericBase:r,fromDenomination:n,toNumericBase:i,toDenomination:o,numberOfDecimals:a}=e;let s=le[r](t);return n&&(s=ge[n](s)),o&&(s=me[o](s)),a&&(s=s.dp(a,Y.Z.ROUND_HALF_DOWN)),i&&(s=ye[i](s)),s})({fromNumericBase:r,toNumericBase:n,fromDenomination:i,toDenomination:o,numberOfDecimals:a,value:e||"0"})};function we(e){return ve(e,{fromNumericBase:"dec",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI"})}function Pe(e){return ve(e,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"GWEI"})}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e){return Pe(we(e))}const Ce=(e,t)=>{var r;try{z().ok(e&&"object"===typeof e,"Params must be an object."),z().ok("data"in e,'Params must include a "data" field.'),z().ok("from"in e,'Params must include a "from" field.'),z().ok("string"===typeof e.from&&(0,q.isValidAddress)(e.from),'"from" field must be a valid, lowercase, hexadecimal Ethereum address string.');let n=null,i=null;switch(e.version){case V.SignTypedDataVersion.V1:"string"===typeof e.data?z().doesNotThrow((()=>{n=JSON.parse(e.data)}),'"data" must be a valid JSON string.'):n=e.data,z().ok(Array.isArray(n),"params.data must be an array."),z().doesNotThrow((()=>{(0,V.typedSignatureHash)(n)}),"Signing data must be valid EIP-712 typed data.");break;case V.SignTypedDataVersion.V3:case V.SignTypedDataVersion.V4:"string"===typeof e.data?z().doesNotThrow((()=>{n=JSON.parse(e.data)}),'"data" must be a valid JSON string.'):n=e.data,z().ok(n.primaryType in n.types,`Primary type of "${n.primaryType}" has no type definition.`);const o=$.validate(n,V.TYPED_MESSAGE_SCHEMA.properties);z().strictEqual(o.errors.length,0,"Signing data must conform to EIP-712 schema. See https://git.io/fNtcx."),i=null===(r=n.domain)||void 0===r?void 0:r.chainId,i&&(z().ok(!Number.isNaN(t),`Cannot sign messages for chainId "${i}", because Web3Auth is switching networks.`),"string"===typeof i&&(i=Number.parseInt(i,j(i)?16:10)),z().strictEqual(i,t,`Provided chainId "${i}" must match the active chainId "${t}"`));break;default:z().fail(`Unknown typed data version "${e.version}"`)}}catch(n){throw R.ethErrors.rpc.invalidInput({message:null===n||void 0===n?void 0:n.message})}};function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}async function _e(e,t,r){const n=await r.formatTransaction(e),i=await r.getCommonConfiguration();return Z.TransactionFactory.fromTxData(n,{common:i}).sign(Q.from(t,"hex")).serialize()}function Te(e){return(0,q.addHexPrefix)(e.toString(16))}function ke(e){return q.BN.isBN(e)?e:new q.BN((0,q.stripHexPrefix)(e),16)}const Se="0x0",Ie="0x2",Ae="sentEther",Be="contractInteraction",je="contractDeployment",De="fee-market",Me="legacy",Re="eth_gasPrice";function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class Ge{constructor(e){let{getProviderEngineProxy:t}=e;(0,n.Z)(this,"chainConfig",null),(0,n.Z)(this,"getProviderEngineProxy",void 0),(0,n.Z)(this,"isEIP1559Compatible",!1),this.getProviderEngineProxy=t}get providerProxy(){return this.getProviderEngineProxy()}async init(){this.chainConfig=await this.providerProxy.request({method:"eth_provider_config",params:[]}),this.isEIP1559Compatible=await this.getEIP1559Compatibility()}async getCommonConfiguration(){if(!this.chainConfig)throw new Error("Chain config not initialized");const{displayName:e,chainId:t}=this.chainConfig,r=this.isEIP1559Compatible?J.Hardfork.London:J.Hardfork.Berlin,n={name:e,chainId:"loading"===t?0:Number.parseInt(t,16),networkId:"loading"===t?0:Number.parseInt(t,16),defaultHardfork:r};return X().custom(n)}async formatTransaction(e){if(!this.chainConfig)throw new Error("Chain config not initialized");const t=Fe({},e);if(void 0===t.nonce&&(t.nonce=await this.providerProxy.request({method:"eth_getTransactionCount",params:[e.from,"latest"]})),!this.isEIP1559Compatible&&t.gasPrice){if(t.maxFeePerGas&&delete t.maxFeePerGas,t.maxPriorityFeePerGas&&delete t.maxPriorityFeePerGas,t.gas)t.gasLimit=t.gas;else{const e=await this.getDefaultGasLimit(t);e&&(t.gasLimit=e)}return t}if(t.gas)t.gasLimit=t.gas;else{const e=await this.getDefaultGasLimit(t);e&&(t.gasLimit=e)}const{gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:i}=await this.getDefaultGasFees(t);var o,a;return this.isEIP1559Compatible?(!t.gasPrice||t.maxFeePerGas||t.maxPriorityFeePerGas?(n&&!t.maxFeePerGas&&(t.maxFeePerGas=n),i&&!t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=i),r&&!t.maxFeePerGas&&(t.maxFeePerGas=r),t.maxFeePerGas&&!t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=t.maxFeePerGas)):(t.maxFeePerGas=t.gasPrice,t.maxPriorityFeePerGas=(o="string"===typeof i?(0,q.stripHexPrefix)(i):i,a="string"===typeof t.gasPrice?(0,q.stripHexPrefix)(t.gasPrice):t.gasPrice,null!==o&&void 0!==o&&null!==a&&void 0!==a&&new Y.O(o,10).lt(a,10)?i:t.gasPrice)),delete t.gasPrice):(delete t.maxPriorityFeePerGas,delete t.maxFeePerGas),!r||t.gasPrice||t.maxPriorityFeePerGas||t.maxFeePerGas||(t.gasPrice=r),t.type=this.isEIP1559Compatible?Ie:Se,t.chainId=this.chainConfig.chainId,t}async fetchEthGasPriceEstimate(){return{gasPrice:Pe(await this.providerProxy.request({method:"eth_gasPrice",params:[]})).toString()}}async getEIP1559Compatibility(){const e=await this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});return!!(e&&void 0!==e.baseFeePerGas)}async fetchGasFeeEstimateData(){if(!this.chainConfig)throw new Error("Chain config not initialized");const e="0x1"===this.chainConfig.chainId,t=Number.parseInt(this.chainConfig.chainId,16);let r;try{if(this.isEIP1559Compatible){r={gasFeeEstimates:await async function(e){const t=await(0,s.U2)(e);return Ee(Ee({},t),{},{estimatedBaseFee:xe(t.estimatedBaseFee),low:Ee(Ee({},t.low),{},{suggestedMaxPriorityFeePerGas:xe(t.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:xe(t.low.suggestedMaxFeePerGas)}),medium:Ee(Ee({},t.medium),{},{suggestedMaxPriorityFeePerGas:xe(t.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:xe(t.medium.suggestedMaxFeePerGas)}),high:Ee(Ee({},t.high),{},{suggestedMaxPriorityFeePerGas:xe(t.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:xe(t.high.suggestedMaxFeePerGas)})})}("https://gas-api.metaswap.codefi.network/networks/<chain_id>/suggestedGasFees".replace("<chain_id>",`${t}`)),gasEstimateType:De}}else{if(!e)throw new Error("Main gas fee/price estimation failed. Use fallback");r={gasFeeEstimates:await async function(e){const t=await(0,s.U2)(e,{referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors"});return{low:t.SafeGasPrice,medium:t.ProposeGasPrice,high:t.FastGasPrice}}("https://gas-api.metaswap.codefi.network/networks/<chain_id>/gasPrices".replace("<chain_id>",`${t}`)),gasEstimateType:Me}}}catch(n){try{r={gasFeeEstimates:await this.fetchEthGasPriceEstimate(),gasEstimateType:Re}}catch(i){throw new Error(`Gas fee/price estimation failed. Message: ${i.message}`)}}return r}async getDefaultGasFees(e){if(!this.isEIP1559Compatible&&e.gasPrice||this.isEIP1559Compatible&&e.maxFeePerGas&&e.maxPriorityFeePerGas)return{};try{const{gasFeeEstimates:e,gasEstimateType:t}=await this.fetchGasFeeEstimateData();if(this.isEIP1559Compatible&&t===De){const{medium:{suggestedMaxPriorityFeePerGas:t,suggestedMaxFeePerGas:r}={}}=e;if(t&&r)return{maxFeePerGas:(0,q.addHexPrefix)(we(r)),maxPriorityFeePerGas:(0,q.addHexPrefix)(we(t))}}else{if(t===Me)return{gasPrice:(0,q.addHexPrefix)(we(e.medium))};if(t===Re)return{gasPrice:(0,q.addHexPrefix)(we(e.gasPrice))}}}catch(r){A.error(r)}const{gasPrice:t}=await this.fetchEthGasPriceEstimate();return{gasPrice:(0,q.addHexPrefix)(we(t))}}async estimateTxGas(e){const t=Fe({},e);delete t.gasPrice,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas;return await this.providerProxy.request({method:"eth_estimateGas",params:[t]})}async analyzeGasUsage(e){const t=await this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});let r=Te(function(e,t,r){const n=new q.BN(t),i=new q.BN(r);return e.mul(n).div(i)}(ke(t.gasLimit),19,20));try{r=await this.estimateTxGas(e)}catch(n){A.warn(n)}return{blockGasLimit:t.gasLimit,estimatedGasHex:r}}addGasBuffer(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5;const n=ke(e),i=ke(t).muln(.9),o=n.muln(r);return n.gt(i)?Te(n):o.lt(i)?Te(o):Te(i)}async determineTransactionCategory(e){const{data:t,to:r}=e;let n,i="";if(t&&!r)n=je;else{try{i=await this.providerProxy.request({method:"eth_getCode",params:[r,"latest"]})}catch(o){A.warn(o)}n=!i||"0x"===i||"0x0"===i?Ae:Be}return{transactionCategory:n,code:i}}async getDefaultGasLimit(e){const{transactionCategory:t}=await this.determineTransactionCategory(Fe({},e));if(e.gas)return e.gas;if(e.to&&t===Ae){if(e.data)throw Error("TxGasUtil - Trying to call a function on a non-contract address");const t=21e3;return(0,q.addHexPrefix)(t.toString(16))}const{blockGasLimit:r,estimatedGasHex:n}=await this.analyzeGasUsage(e);return this.addGasBuffer((0,q.addHexPrefix)(n),r)}}function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class Ue extends K{constructor(e){let{config:t,state:r}=e;super({config:{chainConfig:Ke(Ke({},t.chainConfig),{},{chainNamespace:f})},state:r})}async enable(){if(!this.state.privateKey)throw R.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(e){const t=new Ge({getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),r=function(e){let{txFormatter:t,privKey:r,getProviderEngineProxy:n}=e;return{getAccounts:async e=>[`0x${(0,q.privateToAddress)(Q.from(r,"hex")).toString("hex")}`],getPrivateKey:async e=>r,processTransaction:async(e,i)=>{const o=n();if(!o)throw R.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const a=await _e(e,r,t);return await o.request({method:"eth_sendRawTransaction",params:["0x".concat(a.toString("hex"))]})},processSignTransaction:async(e,i)=>{if(!n())throw R.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});return`0x${(await _e(e,r,t)).toString("hex")}`},processEthSignMessage:async(e,t)=>(0,M.l)(r,e.data),processPersonalMessage:async(e,t)=>{const n=Q.from(r,"hex");return(0,V.personalSign)({privateKey:n,data:e.data})},processTypedMessage:async(e,t)=>{A.debug("processTypedMessage",e);const i=Q.from(r,"hex"),o=n();if(!o)throw R.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const a=await o.request({method:"eth_chainId"}),s=Number.parseInt(a,j(a)?16:10),c=Ne(Ne({},e),{},{version:V.SignTypedDataVersion.V1});Ce(c,s);const d="string"===typeof c.data?JSON.parse(c.data):c.data;return(0,V.signTypedData)({privateKey:i,data:d,version:V.SignTypedDataVersion.V1})},processTypedMessageV3:async(e,t)=>{A.debug("processTypedMessageV3",e);const i=Q.from(r,"hex"),o=n();if(!o)throw R.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const a=await o.request({method:"eth_chainId"}),s=Number.parseInt(a,j(a)?16:10);Ce(e,s);const c="string"===typeof e.data?JSON.parse(e.data):e.data;return(0,V.signTypedData)({privateKey:i,data:c,version:V.SignTypedDataVersion.V3})},processTypedMessageV4:async(e,t)=>{A.debug("processTypedMessageV4",e);const i=Q.from(r,"hex"),o=n();if(!o)throw R.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const a=await o.request({method:"eth_chainId"}),s=Number.parseInt(a,j(a)?16:10);Ce(e,s);const c="string"===typeof e.data?JSON.parse(e.data):e.data;return(0,V.signTypedData)({privateKey:i,data:c,version:V.SignTypedDataVersion.V4})},processEncryptionPublicKey:async(e,t)=>(A.info("processEncryptionPublicKey",e),(0,V.getEncryptionPublicKey)(r)),processDecryptMessage:(e,t)=>{A.info("processDecryptMessage",e);const n=(0,q.stripHexPrefix)(e.data),i=Q.from(n,"hex");return(0,V.decrypt)({encryptedData:JSON.parse(i.toString("utf8")),privateKey:r})}}}({txFormatter:t,privKey:e,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),n=ie(r),i=this.getChainSwitchMiddleware(),a=new o.eI,{networkMiddleware:s}=se(this.config.chainConfig);a.push(n),a.push(i),a.push(this.getAccountMiddleware()),a.push(s);const c=(0,M.Xj)(a);this.updateProviderEngineProxy(c),await t.init(),await this.lookupNetwork()}async updateAccount(e){if(!this._providerEngineProxy)throw R.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});await this._providerEngineProxy.request({method:"eth_private_key"})!==e.privateKey&&(await this.setupProvider(e.privateKey),this._providerEngineProxy.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"eth_accounts"})}))}async switchChain(e){if(!this._providerEngineProxy)throw R.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const t=this.getChainConfig(e.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:t});const r=await this._providerEngineProxy.request({method:"eth_private_key"});await this.setupProvider(r)}async lookupNetwork(){if(!this._providerEngineProxy)throw R.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});const{chainId:e}=this.config.chainConfig;if(!e)throw R.ethErrors.rpc.invalidParams("chainId is required while lookupNetwork");const t=await this._providerEngineProxy.request({method:"net_version",params:[]});if(parseInt(e,16)!==parseInt(t,10))throw R.ethErrors.provider.chainDisconnected(`Invalid network, net_version is: ${t}`);return this.state.chainId!==e&&(this._providerEngineProxy.emit("chainChanged",e),this._providerEngineProxy.emit("connect",{chainId:e})),this.update({chainId:e}),t}getChainSwitchMiddleware(){return function(e){let{addChain:t,switchChain:r}=e;return(0,o.v0)({wallet_addEthereumChain:(0,o.Pk)((async function(e,r){var n;const i=null!==(n=e.params)&&void 0!==n&&n.length?e.params[0]:void 0;if(!i)throw R.ethErrors.rpc.invalidParams("Missing chain params");if(!i.chainId)throw R.ethErrors.rpc.invalidParams("Missing chainId in chainParams");if(!i.rpcUrls||0===i.rpcUrls.length)throw R.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");if(!i.nativeCurrency)throw R.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");r.result=await t(i)})),wallet_switchEthereumChain:(0,o.Pk)((async function(e,t){var n;const i=null!==(n=e.params)&&void 0!==n&&n.length?e.params[0]:void 0;if(!i)throw R.ethErrors.rpc.invalidParams("Missing chainId");t.result=await r(i)}))})}({addChain:async e=>{const{chainId:t,chainName:r,rpcUrls:n,blockExplorerUrls:i,nativeCurrency:o}=e;this.addChain({chainNamespace:"eip155",chainId:t,ticker:(null===o||void 0===o?void 0:o.symbol)||"ETH",tickerName:(null===o||void 0===o?void 0:o.name)||"Ether",displayName:r,rpcTarget:n[0],blockExplorer:(null===i||void 0===i?void 0:i[0])||""})},switchChain:async e=>{const{chainId:t}=e;await this.switchChain({chainId:t})}})}getAccountMiddleware(){return function(e){let{updatePrivatekey:t}=e;return(0,o.v0)({wallet_updateAccount:(0,o.Pk)((async function(e,r){var n;const i=null!==(n=e.params)&&void 0!==n&&n.length?e.params[0]:void 0;if(null===i||void 0===i||!i.privateKey)throw R.ethErrors.rpc.invalidParams("Missing privateKey");r.result=await t(i)}))})}({updatePrivatekey:async e=>{const{privateKey:t}=e;await this.updateAccount({privateKey:t})}})}}(0,n.Z)(Ue,"getProviderInstance",(async e=>{const t=new Ue({config:{chainConfig:e.chainConfig}});return await t.setupProvider(e.privKey),t}));const Ze=[{name:"Rainbow",chains:[f],logo:"https://images.web3auth.io/login-rainbow.svg",mobile:{native:"rainbow:",universal:"https://rnbwapp.com"},desktop:{native:"",universal:""}},{name:"MetaMask",chains:[f],logo:"https://images.web3auth.io/login-metamask.svg",mobile:{native:"metamask:",universal:"https://metamask.app.link"},desktop:{native:"",universal:""}}];function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}class qe extends D{constructor(e){super(e),(0,n.Z)(this,"name",C.WALLET_CONNECT_V1),(0,n.Z)(this,"adapterNamespace",l),(0,n.Z)(this,"currentChainNamespace",f),(0,n.Z)(this,"type",_),(0,n.Z)(this,"adapterOptions",void 0),(0,n.Z)(this,"status",T.NOT_READY),(0,n.Z)(this,"adapterData",{uri:"",extensionAdapters:Ze}),(0,n.Z)(this,"connector",null),(0,n.Z)(this,"wcProvider",null),(0,n.Z)(this,"rehydrated",!1),this.adapterOptions=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),this.chainConfig=e.chainConfig||null,this.sessionTime=e.sessionTime||86400}get connected(){var e;return!(null===(e=this.connector)||void 0===e||!e.connected)}get provider(){var e;return(null===(e=this.wcProvider)||void 0===e?void 0:e.provider)||null}set provider(e){throw new Error("Not implemented")}async init(){super.checkInitializationRequirements(),this.chainConfig||(this.chainConfig=g(f,1)),this.connector=this.getWalletConnectInstance(),this.wcProvider=new ue({config:{chainConfig:this.chainConfig},connector:this.connector}),this.emit(k.READY,C.WALLET_CONNECT_V1),this.status=T.READY,A.debug("initializing wallet connect v1 adapter"),this.connector.connected&&(this.rehydrated=!0,await this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId}))}async connect(){if(super.checkConnectionRequirements(),!this.connector)throw y.notReady("Wallet adapter is not ready yet");if(this.connected)return await this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId}),this.provider;if(this.status!==T.CONNECTING){var e,t;if(null!==(e=this.adapterOptions.adapterSettings)&&void 0!==e&&e.qrcodeModal)this.connector=this.getWalletConnectInstance(),this.wcProvider=new ue({config:{chainConfig:this.chainConfig,skipLookupNetwork:null===(t=this.adapterOptions.adapterSettings)||void 0===t?void 0:t.skipNetworkSwitching},connector:this.connector});await this.createNewSession(),this.status=T.CONNECTING,this.emit(k.CONNECTING,{adapter:C.WALLET_CONNECT_V1})}return new Promise(((e,t)=>{if(!this.connector)return t(y.notReady("Wallet adapter is not ready yet"));this.connector.on("modal_closed",(async()=>(this.status=T.READY,this.emit(k.READY,C.WALLET_CONNECT_V1),t(new Error("User closed modal")))));try{this.connector.on("connect",(async(t,r)=>(t&&this.emit(k.ERRORED,t),A.debug("connected event emitted by web3auth"),await this.onConnectHandler(r.params[0]),e(this.provider))))}catch(r){A.error("Wallet connect v1 adapter error while connecting",r),this.status=T.READY,this.rehydrated=!0,this.emit(k.ERRORED,r),t(r instanceof m?r:v.connectionError(`Failed to login with wallet connect: ${(null===r||void 0===r?void 0:r.message)||""}`))}}))}setAdapterSettings(e){this.status!==T.READY&&(null!==e&&void 0!==e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!==e&&void 0!==e&&e.clientId&&(this.clientId=e.clientId))}async getUserInfo(){if(!this.connected)throw v.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async disconnect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};const{cleanup:t}=e;if(!this.connector||!this.connected)throw v.notConnectedError("Not connected with wallet");await super.disconnect(),await this.connector.killSession(),this.rehydrated=!1,t?(this.connector=null,this.status=T.NOT_READY,this.wcProvider=null):this.status=T.READY,this.emit(k.DISCONNECTED)}async addChain(e){try{var t;if(!this.wcProvider)throw y.notReady("Wallet adapter is not ready yet");const r=null===(t=this.adapterOptions.adapterSettings)||void 0===t?void 0:t.networkSwitchModal;r&&await r.addNetwork({chainConfig:e,appOrigin:window.location.hostname}),await this.wcProvider.addChain(e)}catch(r){A.error(r)}}async switchChain(e,t){var r;if(!this.wcProvider)throw y.notReady("Wallet adapter is not ready yet");const n=null===(r=this.adapterOptions.adapterSettings)||void 0===r?void 0:r.networkSwitchModal;n&&await n.switchNetwork({currentChainConfig:t,newChainConfig:e,appOrigin:window.location.hostname}),await this.wcProvider.switchChain({chainId:t.chainId,lookup:!1,addChain:!1})}async createNewSession(){var e,t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{forceNewSession:!1};if(!this.connector)throw y.notReady("Wallet adapter is not ready yet");if(r.forceNewSession&&this.connector.pending&&await this.connector.killSession(),null===(e=this.adapterOptions)||void 0===e||null===(t=e.adapterSettings)||void 0===t||!t.qrcodeModal)return new Promise(((e,t)=>{var r;if(!this.connector)return t(y.notReady("Wallet adapter is not ready yet"));A.debug("creating new session for web3auth wallet connect"),this.connector.on("display_uri",(async(r,n)=>{var i;if(r)return this.emit(k.ERRORED,v.connectionError("Failed to display wallet connect qr code")),t(r);const o=n.params[0];return this.updateAdapterData({uri:o,extensionAdapters:Ze}),null===(i=this.connector)||void 0===i||i.off("display_uri"),e()})),this.connector.createSession({chainId:parseInt((null===(r=this.chainConfig)||void 0===r?void 0:r.chainId)||"0x1",16)}).catch((e=>(A.error("error while creating new wallet connect session",e),this.emit(k.ERRORED,e),t(e))))}));var n;await this.connector.createSession({chainId:parseInt((null===(n=this.chainConfig)||void 0===n?void 0:n.chainId)||"0x1",16)})}async onConnectHandler(e){if(!this.connector||!this.wcProvider)throw y.notReady("Wallet adapter is not ready yet");if(!this.chainConfig)throw y.invalidParams("Chain config is not set");const{chainId:t}=e;if(A.debug("connected chainId in hex"),t!==parseInt(this.chainConfig.chainId,16)){var r,n,i;const e=g(f,t)||{chainId:`0x${t.toString(16)}`,displayName:"Unknown Network"},a=null===(r=this.adapterOptions.adapterSettings)||void 0===r?void 0:r.qrcodeModal;if(!a||a&&(null===(n=this.adapterOptions)||void 0===n||null===(i=n.adapterSettings)||void 0===i||!i.skipNetworkSwitching))try{await this.addChain(this.chainConfig),await this.switchChain(e,this.chainConfig),this.connector=this.getWalletConnectInstance()}catch(o){return A.error("error while chain switching",o),await this.createNewSession({forceNewSession:!0}),this.emit(k.ERRORED,y.fromCode(5e3,`Not connected to correct network. Expected: ${this.chainConfig.displayName}, Current: ${(null===e||void 0===e?void 0:e.displayName)||t}, Please switch to correct network from wallet`)),this.status=T.READY,void(this.rehydrated=!0)}}await this.wcProvider.setupProvider(this.connector),this.subscribeEvents(this.connector),this.status=T.CONNECTED,this.emit(k.CONNECTED,{adapter:C.WALLET_CONNECT_V1,reconnected:this.rehydrated})}subscribeEvents(e){e.on("session_update",(async e=>{e&&this.emit(k.ERRORED,e)}))}getWalletConnectInstance(){const e=this.adapterOptions.adapterSettings||{};return e.bridge=e.bridge||"https://bridge.walletconnect.org",new i.Z(e)}}},93326:function(e,t,r){var n=r(48764).Buffer,i=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isZeroAddress=t.zeroAddress=t.importPublic=t.privateToAddress=t.privateToPublic=t.publicToAddress=t.pubToAddress=t.isValidPublic=t.isValidPrivate=t.generateAddress2=t.generateAddress=t.isValidChecksumAddress=t.toChecksumAddress=t.isValidAddress=t.Account=void 0;var a=o(r(69282)),s=r(2970),c=r(95053),d=r(14543),u=r(39831),f=r(95642),h=r(98898),p=r(11091),l=r(58456),g=function(){function e(e,t,r,n){void 0===e&&(e=new s.BN(0)),void 0===t&&(t=new s.BN(0)),void 0===r&&(r=u.KECCAK256_RLP),void 0===n&&(n=u.KECCAK256_NULL),this.nonce=e,this.balance=t,this.stateRoot=r,this.codeHash=n,this._validate()}return e.fromAccountData=function(t){var r=t.nonce,n=t.balance,i=t.stateRoot,o=t.codeHash;return new e(r?new s.BN((0,f.toBuffer)(r)):void 0,n?new s.BN((0,f.toBuffer)(n)):void 0,i?(0,f.toBuffer)(i):void 0,o?(0,f.toBuffer)(o):void 0)},e.fromRlpSerializedAccount=function(e){var t=s.rlp.decode(e);if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)},e.fromValuesArray=function(t){var r=i(t,4),n=r[0],o=r[1],a=r[2],c=r[3];return new e(new s.BN(n),new s.BN(o),a,c)},e.prototype._validate=function(){if(this.nonce.lt(new s.BN(0)))throw new Error("nonce must be greater than zero");if(this.balance.lt(new s.BN(0)))throw new Error("balance must be greater than zero");if(32!==this.stateRoot.length)throw new Error("stateRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")},e.prototype.raw=function(){return[(0,l.bnToUnpaddedBuffer)(this.nonce),(0,l.bnToUnpaddedBuffer)(this.balance),this.stateRoot,this.codeHash]},e.prototype.serialize=function(){return s.rlp.encode(this.raw())},e.prototype.isContract=function(){return!this.codeHash.equals(u.KECCAK256_NULL)},e.prototype.isEmpty=function(){return this.balance.isZero()&&this.nonce.isZero()&&this.codeHash.equals(u.KECCAK256_NULL)},e}();t.Account=g;t.isValidAddress=function(e){try{(0,p.assertIsString)(e)}catch(t){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};t.toChecksumAddress=function(e,t){(0,p.assertIsHexString)(e);var r=(0,d.stripHexPrefix)(e).toLowerCase(),n="";t&&(n=(0,l.toType)(t,l.TypeOutput.BN).toString()+"0x");for(var i=(0,h.keccakFromString)(n+r).toString("hex"),o="0x",a=0;a<r.length;a++)parseInt(i[a],16)>=8?o+=r[a].toUpperCase():o+=r[a];return o};t.isValidChecksumAddress=function(e,r){return(0,t.isValidAddress)(e)&&(0,t.toChecksumAddress)(e,r)===e};t.generateAddress=function(e,t){(0,p.assertIsBuffer)(e),(0,p.assertIsBuffer)(t);var r=new s.BN(t);return r.isZero()?(0,h.rlphash)([e,null]).slice(-20):(0,h.rlphash)([e,n.from(r.toArray())]).slice(-20)};t.generateAddress2=function(e,t,r){return(0,p.assertIsBuffer)(e),(0,p.assertIsBuffer)(t),(0,p.assertIsBuffer)(r),(0,a.default)(20===e.length),(0,a.default)(32===t.length),(0,h.keccak256)(n.concat([n.from("ff","hex"),e,t,(0,h.keccak256)(r)])).slice(-20)};t.isValidPrivate=function(e){return(0,c.privateKeyVerify)(e)};t.isValidPublic=function(e,t){return void 0===t&&(t=!1),(0,p.assertIsBuffer)(e),64===e.length?(0,c.publicKeyVerify)(n.concat([n.from([4]),e])):!!t&&(0,c.publicKeyVerify)(e)};t.pubToAddress=function(e,t){return void 0===t&&(t=!1),(0,p.assertIsBuffer)(e),t&&64!==e.length&&(e=n.from((0,c.publicKeyConvert)(e,!1).slice(1))),(0,a.default)(64===e.length),(0,h.keccak)(e).slice(-20)},t.publicToAddress=t.pubToAddress;t.privateToPublic=function(e){return(0,p.assertIsBuffer)(e),n.from((0,c.publicKeyCreate)(e,!1)).slice(1)};t.privateToAddress=function(e){return(0,t.publicToAddress)((0,t.privateToPublic)(e))};t.importPublic=function(e){return(0,p.assertIsBuffer)(e),64!==e.length&&(e=n.from((0,c.publicKeyConvert)(e,!1).slice(1))),e};t.zeroAddress=function(){var e=(0,f.zeros)(20);return(0,f.bufferToHex)(e)};t.isZeroAddress=function(e){try{(0,p.assertIsString)(e)}catch(r){return!1}return(0,t.zeroAddress)()===e}},90897:function(e,t,r){var n=r(48764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Address=void 0;var o=i(r(69282)),a=r(2970),s=r(95642),c=r(93326),d=function(){function e(e){(0,o.default)(20===e.length,"Invalid address length"),this.buf=e}return e.zero=function(){return new e((0,s.zeros)(20))},e.fromString=function(t){return(0,o.default)((0,c.isValidAddress)(t),"Invalid address"),new e((0,s.toBuffer)(t))},e.fromPublicKey=function(t){return(0,o.default)(n.isBuffer(t),"Public key should be Buffer"),new e((0,c.pubToAddress)(t))},e.fromPrivateKey=function(t){return(0,o.default)(n.isBuffer(t),"Private key should be Buffer"),new e((0,c.privateToAddress)(t))},e.generate=function(t,r){return(0,o.default)(a.BN.isBN(r)),new e((0,c.generateAddress)(t.buf,r.toArrayLike(n)))},e.generate2=function(t,r,i){return(0,o.default)(n.isBuffer(r)),(0,o.default)(n.isBuffer(i)),new e((0,c.generateAddress2)(t.buf,r,i))},e.prototype.equals=function(e){return this.buf.equals(e.buf)},e.prototype.isZero=function(){return this.equals(e.zero())},e.prototype.isPrecompileOrSystemAddress=function(){var e=new a.BN(this.buf),t=new a.BN(0),r=new a.BN("ffff","hex");return e.gte(t)&&e.lte(r)},e.prototype.toString=function(){return"0x"+this.buf.toString("hex")},e.prototype.toBuffer=function(){return n.from(this.buf)},e}();t.Address=d},95642:function(e,t,r){var n=r(48764).Buffer,i=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.bufArrToArr=t.arrToBufArr=t.validateNoLeadingZeroes=t.baToJSON=t.toUtf8=t.addHexPrefix=t.toUnsigned=t.fromSigned=t.bufferToHex=t.bufferToInt=t.toBuffer=t.unpadHexString=t.unpadArray=t.unpadBuffer=t.setLengthRight=t.setLengthLeft=t.zeros=t.intToBuffer=t.intToHex=void 0;var a=r(2970),s=r(14543),c=r(11091);t.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Received an invalid integer type: ".concat(e));return"0x".concat(e.toString(16))};t.intToBuffer=function(e){var r=(0,t.intToHex)(e);return n.from((0,s.padToEven)(r.slice(2)),"hex")};t.zeros=function(e){return n.allocUnsafe(e).fill(0)};var d=function(e,r,n){var i=(0,t.zeros)(r);return n?e.length<r?(e.copy(i),i):e.slice(0,r):e.length<r?(e.copy(i,r-e.length),i):e.slice(-r)};t.setLengthLeft=function(e,t){return(0,c.assertIsBuffer)(e),d(e,t,!1)};t.setLengthRight=function(e,t){return(0,c.assertIsBuffer)(e),d(e,t,!0)};var u=function(e){for(var t=e[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};t.unpadBuffer=function(e){return(0,c.assertIsBuffer)(e),u(e)};t.unpadArray=function(e){return(0,c.assertIsArray)(e),u(e)};t.unpadHexString=function(e){return(0,c.assertIsHexString)(e),e=(0,s.stripHexPrefix)(e),u(e)};t.toBuffer=function(e){if(null===e||void 0===e)return n.allocUnsafe(0);if(n.isBuffer(e))return n.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return n.from(e);if("string"===typeof e){if(!(0,s.isHexString)(e))throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ".concat(e));return n.from((0,s.padToEven)((0,s.stripHexPrefix)(e)),"hex")}if("number"===typeof e)return(0,t.intToBuffer)(e);if(a.BN.isBN(e)){if(e.isNeg())throw new Error("Cannot convert negative BN to buffer. Given: ".concat(e));return e.toArrayLike(n)}if(e.toArray)return n.from(e.toArray());if(e.toBuffer)return n.from(e.toBuffer());throw new Error("invalid type")};t.bufferToInt=function(e){return new a.BN((0,t.toBuffer)(e)).toNumber()};t.bufferToHex=function(e){return"0x"+(e=(0,t.toBuffer)(e)).toString("hex")};t.fromSigned=function(e){return new a.BN(e).fromTwos(256)};t.toUnsigned=function(e){return n.from(e.toTwos(256).toArray())};t.addHexPrefix=function(e){return"string"!==typeof e||(0,s.isHexPrefixed)(e)?e:"0x"+e};t.toUtf8=function(e){if((e=(0,s.stripHexPrefix)(e)).length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return n.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};t.baToJSON=function(e){if(n.isBuffer(e))return"0x".concat(e.toString("hex"));if(e instanceof Array){for(var r=[],i=0;i<e.length;i++)r.push((0,t.baToJSON)(e[i]));return r}};t.validateNoLeadingZeroes=function(e){var t,r;try{for(var n=i(Object.entries(e)),a=n.next();!a.done;a=n.next()){var s=o(a.value,2),c=s[0],d=s[1];if(void 0!==d&&d.length>0&&0===d[0])throw new Error("".concat(c," cannot have leading zeroes, received: ").concat(d.toString("hex")))}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},t.arrToBufArr=function e(t){return Array.isArray(t)?t.map((function(t){return e(t)})):n.from(t)},t.bufArrToArr=function e(t){return Array.isArray(t)?t.map((function(t){return e(t)})):Uint8Array.from(null!==t&&void 0!==t?t:[])}},39831:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.KECCAK256_RLP=t.KECCAK256_RLP_S=t.KECCAK256_RLP_ARRAY=t.KECCAK256_RLP_ARRAY_S=t.KECCAK256_NULL=t.KECCAK256_NULL_S=t.TWO_POW256=t.MAX_INTEGER=t.MAX_UINT64=void 0;var n=r(48764),i=r(2970);t.MAX_UINT64=new i.BN("ffffffffffffffff",16),t.MAX_INTEGER=new i.BN("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),t.TWO_POW256=new i.BN("10000000000000000000000000000000000000000000000000000000000000000",16),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.KECCAK256_NULL=n.Buffer.from(t.KECCAK256_NULL_S,"hex"),t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.KECCAK256_RLP_ARRAY=n.Buffer.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.KECCAK256_RLP=n.Buffer.from(t.KECCAK256_RLP_S,"hex")},2970:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.rlp=t.BN=void 0;var s=a(r(13550));t.BN=s.default;var c=o(r(51675));t.rlp=c},98898:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.rlphash=t.ripemd160FromArray=t.ripemd160FromString=t.ripemd160=t.sha256FromArray=t.sha256FromString=t.sha256=t.keccakFromArray=t.keccakFromHexString=t.keccakFromString=t.keccak256=t.keccak=void 0;var i=r(82192),o=r(23482),a=r(2970),s=r(95642),c=r(11091);t.keccak=function(e,t){switch(void 0===t&&(t=256),(0,c.assertIsBuffer)(e),t){case 224:return(0,i.keccak224)(e);case 256:return(0,i.keccak256)(e);case 384:return(0,i.keccak384)(e);case 512:return(0,i.keccak512)(e);default:throw new Error("Invald algorithm: keccak".concat(t))}};t.keccak256=function(e){return(0,t.keccak)(e)};t.keccakFromString=function(e,r){void 0===r&&(r=256),(0,c.assertIsString)(e);var i=n.from(e,"utf8");return(0,t.keccak)(i,r)};t.keccakFromHexString=function(e,r){return void 0===r&&(r=256),(0,c.assertIsHexString)(e),(0,t.keccak)((0,s.toBuffer)(e),r)};t.keccakFromArray=function(e,r){return void 0===r&&(r=256),(0,c.assertIsArray)(e),(0,t.keccak)((0,s.toBuffer)(e),r)};var d=function(e){return e=(0,s.toBuffer)(e),o("sha256").update(e).digest()};t.sha256=function(e){return(0,c.assertIsBuffer)(e),d(e)};t.sha256FromString=function(e){return(0,c.assertIsString)(e),d(e)};t.sha256FromArray=function(e){return(0,c.assertIsArray)(e),d(e)};var u=function(e,t){e=(0,s.toBuffer)(e);var r=o("rmd160").update(e).digest();return!0===t?(0,s.setLengthLeft)(r,32):r};t.ripemd160=function(e,t){return(0,c.assertIsBuffer)(e),u(e,t)};t.ripemd160FromString=function(e,t){return(0,c.assertIsString)(e),u(e,t)};t.ripemd160FromArray=function(e,t){return(0,c.assertIsArray)(e),u(e,t)};t.rlphash=function(e){return(0,t.keccak)(a.rlp.encode(e))}},11091:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.assertIsString=t.assertIsArray=t.assertIsBuffer=t.assertIsHexString=void 0;var i=r(14543);t.assertIsHexString=function(e){if(!(0,i.isHexString)(e)){var t="This method only supports 0x-prefixed hex strings but input was: ".concat(e);throw new Error(t)}};t.assertIsBuffer=function(e){if(!n.isBuffer(e)){var t="This method only supports Buffer but input was: ".concat(e);throw new Error(t)}};t.assertIsArray=function(e){if(!Array.isArray(e)){var t="This method only supports number arrays but input was: ".concat(e);throw new Error(t)}};t.assertIsString=function(e){if("string"!==typeof e){var t="This method only supports strings but input was: ".concat(e);throw new Error(t)}}},62671:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isHexString=t.getKeys=t.fromAscii=t.fromUtf8=t.toAscii=t.arrayContainsArray=t.getBinarySize=t.padToEven=t.stripHexPrefix=t.isHexPrefixed=void 0,i(r(39831),t),i(r(93326),t),i(r(90897),t),i(r(98898),t),i(r(44877),t),i(r(95642),t),i(r(5780),t),i(r(2970),t),i(r(58456),t);var o=r(14543);Object.defineProperty(t,"isHexPrefixed",{enumerable:!0,get:function(){return o.isHexPrefixed}}),Object.defineProperty(t,"stripHexPrefix",{enumerable:!0,get:function(){return o.stripHexPrefix}}),Object.defineProperty(t,"padToEven",{enumerable:!0,get:function(){return o.padToEven}}),Object.defineProperty(t,"getBinarySize",{enumerable:!0,get:function(){return o.getBinarySize}}),Object.defineProperty(t,"arrayContainsArray",{enumerable:!0,get:function(){return o.arrayContainsArray}}),Object.defineProperty(t,"toAscii",{enumerable:!0,get:function(){return o.toAscii}}),Object.defineProperty(t,"fromUtf8",{enumerable:!0,get:function(){return o.fromUtf8}}),Object.defineProperty(t,"fromAscii",{enumerable:!0,get:function(){return o.fromAscii}}),Object.defineProperty(t,"getKeys",{enumerable:!0,get:function(){return o.getKeys}}),Object.defineProperty(t,"isHexString",{enumerable:!0,get:function(){return o.isHexString}})},14543:function(e,t,r){var n=r(48764).Buffer;function i(e){if("string"!==typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type ".concat(typeof e));return"0"===e[0]&&"x"===e[1]}Object.defineProperty(t,"__esModule",{value:!0}),t.isHexString=t.getKeys=t.fromAscii=t.fromUtf8=t.toAscii=t.arrayContainsArray=t.getBinarySize=t.padToEven=t.stripHexPrefix=t.isHexPrefixed=void 0,t.isHexPrefixed=i;function o(e){var t=e;if("string"!==typeof t)throw new Error("[padToEven] value must be type 'string', received ".concat(typeof t));return t.length%2&&(t="0".concat(t)),t}t.stripHexPrefix=function(e){if("string"!==typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received ".concat(typeof e));return i(e)?e.slice(2):e},t.padToEven=o,t.getBinarySize=function(e){if("string"!==typeof e)throw new Error("[getBinarySize] method requires input type 'string', recieved ".concat(typeof e));return n.byteLength(e,"utf8")},t.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[arrayContainsArray] method requires input 'superset' to be an array, got type '".concat(typeof e,"'"));if(!0!==Array.isArray(t))throw new Error("[arrayContainsArray] method requires input 'subset' to be an array, got type '".concat(typeof t,"'"));return t[r?"some":"every"]((function(t){return e.indexOf(t)>=0}))},t.toAscii=function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t},t.fromUtf8=function(e){var t=n.from(e,"utf8");return"0x".concat(o(t.toString("hex")).replace(/^0+|0+$/g,""))},t.fromAscii=function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0".concat(n):n}return"0x".concat(t)},t.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got ".concat(typeof e));if("string"!==typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got ".concat(typeof e));for(var n=[],i=0;i<e.length;i++){var o=e[i][t];if(r&&!o)o="";else if("string"!==typeof o)throw new Error("invalid abi - expected type 'string', received ".concat(typeof o));n.push(o)}return n},t.isHexString=function(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}},5780:function(e,t,r){var n=r(48764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defineProperties=void 0;var o=i(r(69282)),a=r(14543),s=r(2970),c=r(95642);t.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(t){if(void 0===t&&(t=!1),t){var r={};return e._fields.forEach((function(t){r[t]="0x".concat(e[t].toString("hex"))})),r}return(0,c.baToJSON)(e.raw)},e.serialize=function(){return s.rlp.encode(e.raw)},t.forEach((function(t,r){function i(){return e.raw[r]}function a(i){"00"!==(i=(0,c.toBuffer)(i)).toString("hex")||t.allowZero||(i=n.allocUnsafe(0)),t.allowLess&&t.length?(i=(0,c.unpadBuffer)(i),(0,o.default)(t.length>=i.length,"The field ".concat(t.name," must not have more ").concat(t.length," bytes"))):t.allowZero&&0===i.length||!t.length||(0,o.default)(t.length===i.length,"The field ".concat(t.name," must have byte length of ").concat(t.length)),e.raw[r]=i}e._fields.push(t.name),Object.defineProperty(e,t.name,{enumerable:!0,configurable:!0,get:i,set:a}),t.default&&(e[t.name]=t.default),t.alias&&Object.defineProperty(e,t.alias,{enumerable:!1,configurable:!0,set:a,get:i})})),r)if("string"===typeof r&&(r=n.from((0,a.stripHexPrefix)(r),"hex")),n.isBuffer(r)&&(r=s.rlp.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach((function(t,r){e[e._fields[r]]=(0,c.toBuffer)(t)}))}else{if("object"!==typeof r)throw new Error("invalid data");var i=Object.keys(r);t.forEach((function(t){-1!==i.indexOf(t.name)&&(e[t.name]=r[t.name]),-1!==i.indexOf(t.alias)&&(e[t.alias]=r[t.alias])}))}}},44877:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.hashPersonalMessage=t.isValidSignature=t.fromRpcSig=t.toCompactSig=t.toRpcSig=t.ecrecover=t.ecsign=void 0;var i=r(95053),o=r(2970),a=r(95642),s=r(98898),c=r(11091),d=r(58456);function u(e,t){var r=(0,d.toType)(e,d.TypeOutput.BN);if(r.eqn(0)||r.eqn(1))return(0,d.toType)(e,d.TypeOutput.BN);if(!t)return r.subn(27);var n=(0,d.toType)(t,d.TypeOutput.BN);return r.sub(n.muln(2).addn(35))}function f(e){var t=new o.BN(e);return t.eqn(0)||t.eqn(1)}t.ecsign=function(e,t,r){var o=(0,i.ecdsaSign)(e,t),a=o.signature,s=o.recid,c=n.from(a.slice(0,32)),u=n.from(a.slice(32,64));if(!r||"number"===typeof r){if(r&&!Number.isSafeInteger(r))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{r:c,s:u,v:r?s+(2*r+35):s+27}}return{r:c,s:u,v:(0,d.toType)(r,d.TypeOutput.BN).muln(2).addn(35).addn(s).toArrayLike(n)}};t.ecrecover=function(e,t,r,o,s){var c=n.concat([(0,a.setLengthLeft)(r,32),(0,a.setLengthLeft)(o,32)],64),d=u(t,s);if(!f(d))throw new Error("Invalid signature v value");var h=(0,i.ecdsaRecover)(c,d.toNumber(),e);return n.from((0,i.publicKeyConvert)(h,!1).slice(1))};t.toRpcSig=function(e,t,r,i){if(!f(u(e,i)))throw new Error("Invalid signature v value");return(0,a.bufferToHex)(n.concat([(0,a.setLengthLeft)(t,32),(0,a.setLengthLeft)(r,32),(0,a.toBuffer)(e)]))};t.toCompactSig=function(e,t,r,i){if(!f(u(e,i)))throw new Error("Invalid signature v value");var o=(0,d.toType)(e,d.TypeOutput.Number),s=r;return(o>28&&o%2===1||1===o||28===o)&&((s=n.from(r))[0]|=128),(0,a.bufferToHex)(n.concat([(0,a.setLengthLeft)(t,32),(0,a.setLengthLeft)(s,32)]))};t.fromRpcSig=function(e){var t,r,n,i=(0,a.toBuffer)(e);if(i.length>=65)t=i.slice(0,32),r=i.slice(32,64),n=(0,a.bufferToInt)(i.slice(64));else{if(64!==i.length)throw new Error("Invalid signature length");t=i.slice(0,32),r=i.slice(32,64),n=(0,a.bufferToInt)(i.slice(32,33))>>7,r[0]&=127}return n<27&&(n+=27),{v:n,r:t,s:r}};t.isValidSignature=function(e,t,r,n,i){void 0===n&&(n=!0);var a=new o.BN("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new o.BN("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==t.length||32!==r.length)return!1;if(!f(u(e,i)))return!1;var c=new o.BN(t),d=new o.BN(r);return!(c.isZero()||c.gt(s)||d.isZero()||d.gt(s))&&(!n||1!==d.cmp(a))};t.hashPersonalMessage=function(e){(0,c.assertIsBuffer)(e);var t=n.from("\x19Ethereum Signed Message:\n".concat(e.length),"utf-8");return(0,s.keccak)(n.concat([t,e]))}},58456:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.toType=t.TypeOutput=t.bnToRlp=t.bnToUnpaddedBuffer=t.bnToHex=void 0;var i,o=r(2970),a=r(14543),s=r(95642);function c(e){return(0,s.unpadBuffer)(e.toArrayLike(n))}t.bnToHex=function(e){return"0x".concat(e.toString(16))},t.bnToUnpaddedBuffer=c,t.bnToRlp=function(e){return c(e)},function(e){e[e.Number=0]="Number",e[e.BN=1]="BN",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(i=t.TypeOutput||(t.TypeOutput={})),t.toType=function(e,t){if(null===e)return null;if(void 0!==e){if("string"===typeof e&&!(0,a.isHexString)(e))throw new Error("A string must be provided with a 0x-prefix, given: ".concat(e));if("number"===typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");var r=(0,s.toBuffer)(e);if(t===i.Buffer)return r;if(t===i.BN)return new o.BN(r);if(t===i.Number){var n=new o.BN(r),c=new o.BN(Number.MAX_SAFE_INTEGER.toString());if(n.gt(c))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return n.toNumber()}return"0x".concat(r.toString("hex"))}}}}]);